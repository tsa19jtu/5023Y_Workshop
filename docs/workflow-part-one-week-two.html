<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Workflow Part One - Week Two | Data Science for Biologists - 5023Y</title>
  <meta name="description" content="This is very brief introduction to some of the basic skills required to learn R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Workflow Part One - Week Two | Data Science for Biologists - 5023Y" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is very brief introduction to some of the basic skills required to learn R" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Workflow Part One - Week Two | Data Science for Biologists - 5023Y" />
  
  <meta name="twitter:description" content="This is very brief introduction to some of the basic skills required to learn R" />
  

<meta name="author" content="Philip Leftwich" />


<meta name="date" content="2021-10-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="getting-to-know-r-week-one.html"/>
<link rel="next" href="workflow-part-two-week-three.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="libs/klippy-0.0.0.9500/js/klippy.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#approach-and-style"><i class="fa fa-check"></i><b>1.1</b> Approach and style</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#teaching"><i class="fa fa-check"></i><b>1.2</b> Teaching</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#workshops"><i class="fa fa-check"></i><b>1.2.1</b> Workshops</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#introduction-to-r"><i class="fa fa-check"></i><b>1.3</b> Introduction to R</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#getting-around-on-rstudio"><i class="fa fa-check"></i><b>1.4</b> Getting around on RStudio</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#an-intro-to-rstudio"><i class="fa fa-check"></i><b>1.4.1</b> An intro to RStudio</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#using-r-studio-cloud"><i class="fa fa-check"></i><b>1.4.2</b> Using R Studio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#reading"><i class="fa fa-check"></i><b>1.5</b> Reading</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#get-help"><i class="fa fa-check"></i><b>1.6</b> Get Help!</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html"><i class="fa fa-check"></i><b>2</b> Getting to know R - Week One</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#your-first-r-command"><i class="fa fa-check"></i><b>2.1</b> Your first R command</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#typos"><i class="fa fa-check"></i><b>2.1.1</b> Typos</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#more-simple-arithmetic"><i class="fa fa-check"></i><b>2.1.2</b> More simple arithmetic</a></li>
<li class="chapter" data-level="2.1.3" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#try-some-maths"><i class="fa fa-check"></i><b>2.1.3</b> Try some maths</a></li>
<li class="chapter" data-level="2.1.4" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#perform-some-combos"><i class="fa fa-check"></i><b>2.1.4</b> Perform some combos</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#true-or-false-data"><i class="fa fa-check"></i><b>2.2</b> “true or false” data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#assessing-mathematical-truths"><i class="fa fa-check"></i><b>2.2.1</b> Assessing mathematical truths</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#storing-outputs"><i class="fa fa-check"></i><b>2.3</b> Storing outputs</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#choosing-names"><i class="fa fa-check"></i><b>2.3.1</b> Choosing names</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#writing-scripts"><i class="fa fa-check"></i><b>2.4</b> Writing scripts</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#commenting-on-scripts"><i class="fa fa-check"></i><b>2.4.1</b> Commenting on scripts</a></li>
<li class="chapter" data-level="2.4.2" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#running-your-script"><i class="fa fa-check"></i><b>2.4.2</b> Running your script</a></li>
<li class="chapter" data-level="2.4.3" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#saving-your-script"><i class="fa fa-check"></i><b>2.4.3</b> Saving your script</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#error"><i class="fa fa-check"></i><b>2.5</b> Error</a></li>
<li class="chapter" data-level="2.6" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#functions"><i class="fa fa-check"></i><b>2.6</b> Functions</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#storing-the-output-of-functions"><i class="fa fa-check"></i><b>2.6.1</b> Storing the output of functions</a></li>
<li class="chapter" data-level="2.6.2" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#more-fun-with-functions"><i class="fa fa-check"></i><b>2.6.2</b> More fun with functions</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#packages"><i class="fa fa-check"></i><b>2.7</b> Packages</a></li>
<li class="chapter" data-level="2.8" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#my-first-data-visualisation"><i class="fa fa-check"></i><b>2.8</b> My first data visualisation</a></li>
<li class="chapter" data-level="2.9" data-path="getting-to-know-r-week-one.html"><a href="getting-to-know-r-week-one.html#quitting"><i class="fa fa-check"></i><b>2.9</b> Quitting</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html"><i class="fa fa-check"></i><b>3</b> Workflow Part One - Week Two</a>
<ul>
<li class="chapter" data-level="3.1" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#meet-the-penguins"><i class="fa fa-check"></i><b>3.1</b> Meet the Penguins</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#insights-from-data"><i class="fa fa-check"></i><b>3.1.1</b> Insights from data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#the-question"><i class="fa fa-check"></i><b>3.2</b> The Question?</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#hypotheses"><i class="fa fa-check"></i><b>3.2.1</b> Hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#preparing-the-data"><i class="fa fa-check"></i><b>3.3</b> Preparing the data</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#tidy-data"><i class="fa fa-check"></i><b>3.3.1</b> Tidy data</a></li>
<li class="chapter" data-level="3.3.2" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#the-dataset"><i class="fa fa-check"></i><b>3.3.2</b> The dataset</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#prepare-the-rstudio-workspace"><i class="fa fa-check"></i><b>3.4</b> Prepare the RStudio workspace</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#organise"><i class="fa fa-check"></i><b>3.4.1</b> Organise</a></li>
<li class="chapter" data-level="3.4.2" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#create-a-new-r-script"><i class="fa fa-check"></i><b>3.4.2</b> Create a new R script</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#get-the-data-into-r"><i class="fa fa-check"></i><b>3.5</b> Get the data into R</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#view-and-refine"><i class="fa fa-check"></i><b>3.5.1</b> View and refine</a></li>
<li class="chapter" data-level="3.5.2" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#data-management"><i class="fa fa-check"></i><b>3.5.2</b> Data management</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#dataframes-and-tibbles"><i class="fa fa-check"></i><b>3.6</b> Dataframes and tibbles</a></li>
<li class="chapter" data-level="3.7" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#clean-and-tidy"><i class="fa fa-check"></i><b>3.7</b> Clean and tidy</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#tidy"><i class="fa fa-check"></i><b>3.7.1</b> Tidy</a></li>
<li class="chapter" data-level="3.7.2" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#clean"><i class="fa fa-check"></i><b>3.7.2</b> Clean</a></li>
<li class="chapter" data-level="3.7.3" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#refine-variable-names"><i class="fa fa-check"></i><b>3.7.3</b> Refine variable names</a></li>
<li class="chapter" data-level="3.7.4" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#dates"><i class="fa fa-check"></i><b>3.7.4</b> Dates</a></li>
<li class="chapter" data-level="3.7.5" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#rename-some-values"><i class="fa fa-check"></i><b>3.7.5</b> Rename some values</a></li>
<li class="chapter" data-level="3.7.6" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#check-for-duplication"><i class="fa fa-check"></i><b>3.7.6</b> Check for duplication</a></li>
<li class="chapter" data-level="3.7.7" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#check-for-typos-or-implausible-values"><i class="fa fa-check"></i><b>3.7.7</b> Check for typos or implausible values</a></li>
<li class="chapter" data-level="3.7.8" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#missing-values---na"><i class="fa fa-check"></i><b>3.7.8</b> Missing values - NA</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#summing-up"><i class="fa fa-check"></i><b>3.8</b> Summing up</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#what-we-learned"><i class="fa fa-check"></i><b>3.8.1</b> What we learned</a></li>
<li class="chapter" data-level="3.8.2" data-path="workflow-part-one-week-two.html"><a href="workflow-part-one-week-two.html#quitting-1"><i class="fa fa-check"></i><b>3.8.2</b> Quitting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html"><i class="fa fa-check"></i><b>4</b> Workflow Part Two - Week Three</a>
<ul>
<li class="chapter" data-level="4.1" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#initial-insights"><i class="fa fa-check"></i><b>4.1</b> Initial insights</a></li>
<li class="chapter" data-level="4.2" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#numbers-and-sex-of-the-penguins"><i class="fa fa-check"></i><b>4.2</b> Numbers and sex of the penguins</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#making-a-simple-figure"><i class="fa fa-check"></i><b>4.2.1</b> Making a simple figure</a></li>
<li class="chapter" data-level="4.2.2" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#challenge"><i class="fa fa-check"></i><b>4.2.2</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#distributions"><i class="fa fa-check"></i><b>4.3</b> Distributions</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#insights"><i class="fa fa-check"></i><b>4.3.1</b> Insights</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#more-distributions"><i class="fa fa-check"></i><b>4.4</b> More distributions</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#initial-conclusions"><i class="fa fa-check"></i><b>4.4.1</b> Initial conclusions</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#data-transformation"><i class="fa fa-check"></i><b>4.5</b> Data transformation</a></li>
<li class="chapter" data-level="4.6" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#developing-insights"><i class="fa fa-check"></i><b>4.6</b> Developing insights</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#distributions-of-the-relative-bill-length"><i class="fa fa-check"></i><b>4.6.1</b> Distributions of the relative bill length</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#relationshipdifferences"><i class="fa fa-check"></i><b>4.7</b> Relationship/differences</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#differences"><i class="fa fa-check"></i><b>4.7.1</b> Differences</a></li>
<li class="chapter" data-level="4.7.2" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#associations"><i class="fa fa-check"></i><b>4.7.2</b> Associations</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#sex-interactions"><i class="fa fa-check"></i><b>4.8</b> Sex interactions</a></li>
<li class="chapter" data-level="4.9" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#making-our-graphs-more-attractive"><i class="fa fa-check"></i><b>4.9</b> Making our graphs more attractive</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#saving-your-output"><i class="fa fa-check"></i><b>4.9.1</b> Saving your output</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="workflow-part-two-week-three.html"><a href="workflow-part-two-week-three.html#quitting-2"><i class="fa fa-check"></i><b>4.10</b> Quitting</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html"><i class="fa fa-check"></i><b>5</b> ggplot2 A grammar of graphics - Week Four</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#intro-to-grammar"><i class="fa fa-check"></i><b>5.1</b> Intro to grammar</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#building-a-plot"><i class="fa fa-check"></i><b>5.2</b> Building a plot</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#plot-background"><i class="fa fa-check"></i><b>5.3</b> Plot background</a></li>
<li class="chapter" data-level="5.4" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#aesthetics---aes"><i class="fa fa-check"></i><b>5.4</b> Aesthetics - aes()</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#geometric-representations---geom"><i class="fa fa-check"></i><b>5.5</b> Geometric representations - geom()</a></li>
<li class="chapter" data-level="5.6" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#and"><i class="fa fa-check"></i><b>5.6</b> %&gt;% and +</a></li>
<li class="chapter" data-level="5.7" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#colour"><i class="fa fa-check"></i><b>5.7</b> Colour</a></li>
<li class="chapter" data-level="5.8" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#more-layers"><i class="fa fa-check"></i><b>5.8</b> More layers</a></li>
<li class="chapter" data-level="5.9" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#facets"><i class="fa fa-check"></i><b>5.9</b> Facets</a></li>
<li class="chapter" data-level="5.10" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#co-ordinate-space"><i class="fa fa-check"></i><b>5.10</b> Co-ordinate space</a></li>
<li class="chapter" data-level="5.11" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#labels"><i class="fa fa-check"></i><b>5.11</b> Labels</a></li>
<li class="chapter" data-level="5.12" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#themes"><i class="fa fa-check"></i><b>5.12</b> Themes</a></li>
<li class="chapter" data-level="5.13" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#jitter"><i class="fa fa-check"></i><b>5.13</b> Jitter</a></li>
<li class="chapter" data-level="5.14" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#boxplots"><i class="fa fa-check"></i><b>5.14</b> Boxplots</a></li>
<li class="chapter" data-level="5.15" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#density-and-histogram"><i class="fa fa-check"></i><b>5.15</b> Density and histogram</a></li>
<li class="chapter" data-level="5.16" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#more-colours"><i class="fa fa-check"></i><b>5.16</b> More Colours</a>
<ul>
<li class="chapter" data-level="5.16.1" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#assign-colours-to-variables"><i class="fa fa-check"></i><b>5.16.1</b> Assign colours to variables</a></li>
<li class="chapter" data-level="5.16.2" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#accessibility"><i class="fa fa-check"></i><b>5.16.2</b> Accessibility</a></li>
<li class="chapter" data-level="5.16.3" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#using-shapes"><i class="fa fa-check"></i><b>5.16.3</b> Using shapes</a></li>
</ul></li>
<li class="chapter" data-level="5.17" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#patchwork"><i class="fa fa-check"></i><b>5.17</b> Patchwork</a></li>
<li class="chapter" data-level="5.18" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#test"><i class="fa fa-check"></i><b>5.18</b> Test</a></li>
<li class="chapter" data-level="5.19" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#saving"><i class="fa fa-check"></i><b>5.19</b> Saving</a></li>
<li class="chapter" data-level="5.20" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#quitting-3"><i class="fa fa-check"></i><b>5.20</b> Quitting</a></li>
<li class="chapter" data-level="5.21" data-path="ggplot2-a-grammar-of-graphics-week-four.html"><a href="ggplot2-a-grammar-of-graphics-week-four.html#further-reading-guides-and-tips"><i class="fa fa-check"></i><b>5.21</b> Further Reading, Guides and tips</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html"><i class="fa fa-check"></i><b>6</b> Reports with Rmarkdown - Week Five</a>
<ul>
<li class="chapter" data-level="6.0.1" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#format"><i class="fa fa-check"></i><b>6.0.1</b> Format</a></li>
<li class="chapter" data-level="6.1" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#background-to-rmarkdown"><i class="fa fa-check"></i><b>6.1</b> Background to Rmarkdown</a></li>
<li class="chapter" data-level="6.2" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#starting-a-new-rmd-file"><i class="fa fa-check"></i><b>6.2</b> Starting a new Rmd file</a></li>
<li class="chapter" data-level="6.3" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#r-markdown-parts"><i class="fa fa-check"></i><b>6.3</b> R Markdown parts</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#yaml"><i class="fa fa-check"></i><b>6.3.1</b> YAML</a></li>
<li class="chapter" data-level="6.3.2" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#text"><i class="fa fa-check"></i><b>6.3.2</b> Text</a></li>
<li class="chapter" data-level="6.3.3" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#code-chunks"><i class="fa fa-check"></i><b>6.3.3</b> Code Chunks</a></li>
<li class="chapter" data-level="6.3.4" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#here"><i class="fa fa-check"></i><b>6.3.4</b> Here</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#images"><i class="fa fa-check"></i><b>6.4</b> Images</a></li>
<li class="chapter" data-level="6.5" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#tables"><i class="fa fa-check"></i><b>6.5</b> Tables</a></li>
<li class="chapter" data-level="6.6" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#self-contained-documents"><i class="fa fa-check"></i><b>6.6</b> Self-contained documents</a></li>
<li class="chapter" data-level="6.7" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#source-files"><i class="fa fa-check"></i><b>6.7</b> Source files</a></li>
<li class="chapter" data-level="6.8" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#exercise---make-your-own-rmd-document"><i class="fa fa-check"></i><b>6.8</b> Exercise - Make your own Rmd document</a></li>
<li class="chapter" data-level="6.9" data-path="reports-with-rmarkdown-week-five.html"><a href="reports-with-rmarkdown-week-five.html#further-reading-guides-and-tips-1"><i class="fa fa-check"></i><b>6.9</b> Further Reading, Guides and tips</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science for Biologists - 5023Y</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="workflow-part-one---week-two" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Workflow Part One - Week Two</h1>
<script>
  addClassKlippyTo("pre.r, pre.bash");
  addKlippy('right', 'top', 'auto', '1', 'copy to clipboard', 'Copied!');
</script>
<p>Last week we got acquainted with some of the core skills associated with using R and RStudio.</p>
<p>In this workshop we work through the journey of importing and tidying data. Once we have a curated and cleaned dataset we can work on generating insights from the data.</p>
<p>We are going to be working as though we are in the latter stages of a research project, where data has been collected, possibly over several years, to test against our hypotheses.</p>
<p>We have chosen to continue working with a dataset you have been introduced to already - the Palmer Penguins dataset. Previously we loaded a cleaned dataset, very quickly using an R package. Today we will be working in a more realistic scenario - uploading out dataset to our R workspace.</p>
<div id="meet-the-penguins" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Meet the Penguins</h2>
<p>This data, taken from the <code>palmerpenguins</code> (<span class="citation"><a href="references.html#ref-R-palmerpenguins" role="doc-biblioref">Horst, Hill, and Gorman</a> (<a href="references.html#ref-R-palmerpenguins" role="doc-biblioref">2020</a>)</span>) package was originally published by <span class="citation"><a href="references.html#ref-Antarctic" role="doc-biblioref">Gorman, Williams, and Fraser</a> (<a href="references.html#ref-Antarctic" role="doc-biblioref">2014</a>)</span>.</p>
<p>The palmerpenguins data contains size measurements, clutch observations, and blood isotope ratios for three penguin species observed on three islands in the Palmer Archipelago, Antarctica over a study period of three years.</p>
<p><img src="images/gorman-penguins.jpg" title="Photo of three penguin species, Chinstrap, Gentoo, Adelie" alt="Photo of three penguin species, Chinstrap, Gentoo, Adelie" width="80%" /></p>
<p>These data were collected from 2007 - 2009 by Dr. Kristen Gorman with the Palmer Station Long Term Ecological Research Program, part of the US Long Term Ecological Research Network. The data were imported directly from the Environmental Data Initiative (EDI) Data Portal, and are available for use by CC0 license (“No Rights Reserved”) in accordance with the Palmer Station Data Policy. We gratefully acknowledge Palmer Station LTER and the US LTER Network. Special thanks to Marty Downs (Director, LTER Network Office) for help regarding the data license &amp; use. Here is our intrepid package co-author, Dr. Gorman, in action collecting some penguin data:</p>
<p><img src="images/penguin-expedition.jpg" title="Photo of Dr Gorman in the middle of a flock of penguins" alt="Photo of Dr Gorman in the middle of a flock of penguins" width="80%" /></p>
<p>Here is a map of the study site</p>
<p><img src="images/antarctica-map.png" title="Antarctic Peninsula and the Palmer Field Station" alt="Antarctic Peninsula and the Palmer Field Station" width="80%" /></p>
<div id="insights-from-data" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Insights from data</h3>
<p>This dataset is relatively simple, as there aren’t too many variables to consider. But there are a reasonably large number of datapoints (individual penguins) making it possible to generate insights.</p>
<p>However, there are some specific and rather common problems in this data. Problems that we need to work through <em>before</em> we can start to make any visuals or try to draw any conclusions. There are some problems with the variable names, there are some problems with some of the values. There are problems that one of the response variables isn’t actually encoded on the dataset (we have to make it).</p>
<p>Today we are going to</p>
<ul>
<li><p>Formulate clear research questions</p></li>
<li><p>Import our dataset</p></li>
<li><p>Learn how to prepare our RStudio Project workspace</p></li>
<li><p>Learn how to clean, tidy and manipulate our data to allow tables, graphs and analyses to be run</p></li>
</ul>
<p>Don’t worry if you don’t understand exactly what each function does at the moment, or struggle to remember every concept we are introduced to. We will cover these again, in lots more detail as we progress. The main point is to get familiar with our process for handling data and organising our projects.</p>
</div>
</div>
<div id="the-question" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> The Question?</h2>
<p>Imagine that you are a Penguin biologist. Chilly.</p>
<p>Imagine that you want to know more about the feeding habits of the different penguin species in the Antarctic. You also wish to characterise features such as bill morphology, and body size and compare them across species. Adelie and Chinstrap penguins are off-shore, shallow diving foragers, while Gentoo’s feed closer inshort and are deep-divers. We might expect that we can find some features of Gentoo’s that align with their different lifestyle/feeding habits.</p>
<p>With simple measuring techniques and identification skills we can sex the penguins, identify their species and take simple non-invasive measurements of features such as body size, flipper length and bill dimensions. You also recently read a paper about the ratios of different Nitrogen and Carbon isotopes in blood, and how these can be used to infer the types of prey that are forming an organism’s diet.</p>
<div id="hypotheses" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Hypotheses</h3>
<p>These hypotheses are fairly basic, we have not included directionality or specific expecations of the magnitude of the difference. This would come from doing more research on the subject area.</p>
<ul>
<li><p>The bill lengths/depths ratio to body size of Gentoo penguins will be different to Adelie and Chinstrap penguins.</p></li>
<li><p>Gentoo penguins will have a different N and carbon isotope ratio than Adelie and Chinstrap penguins.</p></li>
</ul>
</div>
</div>
<div id="preparing-the-data" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Preparing the data</h2>
<p>Imagine we have completed our practical study and have our data. The data is probably distributed in lots of places, originally notes collected in the field were probably on paper &amp; notebooks. Then someone will have taken time to transcribe those into a spreadsheet. This will almost certainly have been done by typing all the data in by hand.</p>
<p>It is very important for us to know how we would like our data to be organised at the end. We are going to learn how to organise data using the <em>tidy</em> format<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. This is because we are going to use the <code>tidyverse</code> packages by <span class="citation"><a href="references.html#ref-tidyverse2019" role="doc-biblioref">Wickham et al.</a> (<a href="references.html#ref-tidyverse2019" role="doc-biblioref">2019</a>)</span>. This is an opinionated, but highly effective method for generating reproducible analyses with a wide-range of data manipulation tools. Tidy data is an easy format for computers to read.</p>
<div id="tidy-data" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Tidy data</h3>
<p>Here ‘tidy’ refers to a specific structure that lets us manipulate and visualise data with ease. In a tidy dataset each <em>variable</em> is in one column and each row contains one <em>observation</em>. Each cell of the table/spreadsheet contains the <em>values</em>. Obe observation you might make about tidy data is it is quite long - it generates a lot of rows of data.</p>
<p><img src="images/tidy-1.png" title="tidy data overview" alt="tidy data overview" width="80%" /></p>
<p>Typing data in, using any spreadsheet program (e.g. Excel, Google sheets), if we type in the penguin data, we would make each row contain one observation about one penguin. If we made a second observation about a penguin (say in the next year of the study) it would get a new row in the dataset. You are probably thinking this is a lot of typing and a lot of repetition - and you are right! But this format allows the computer to easily make summaries at any level.</p>
<p>If the data we input to R is “untidy” then we have to spend a little bit of time tidying, we will explore this more later.</p>
<p>Once data has been typed up into a spreadsheet and double/triple-checked against the original paper records, then they are saved as a ‘comma-separated values (CSV)’ file-type. These files are the simplest form of database, no coloured cells, no formulae, no text formatting. Each row is a row of the data, each value of a row (previously separate columns) is separated by a comma.</p>
<p>It is convenient to use something like Excel to type in our data - its much more usefully friendly than trying to tpye something in csv format. But we don’t save files in the Excel format because they have a nasty habit of formatting or even losing data when the file gets large enough.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>
If you need to add data to a csv file, you can always open it in an Excel-like program and add more information.</p>
<div class="figure"><span id="fig:unnamed-chunk-45"></span>
<img src="images/excel_csv.png" alt="excel view, csv view" width="80%" />
<p class="caption">
Figure 3.1: Top image: Penguins data viewed in Excel, Bottom image: Penguins data in native csv format
</p>
</div>
<p>It is possible to import data into R in an Excel format, but I recommend sticking with csv formats. Any spreadsheet can be easily converted with the <em>Save As..</em> command.</p>
</div>
<div id="the-dataset" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> The dataset</h3>
<p>For today’s workshop we want to acquire the dataset to work on it. We can retrieve the file we need from here (<a href="https://github.com/UEABIO/5023Y_Workshop/blob/main/data/penguins_raw.csv" class="uri">https://github.com/UEABIO/5023Y_Workshop/blob/main/data/penguins_raw.csv</a>).</p>
<div class="figure"><span id="fig:unnamed-chunk-46"></span>
<img src="images/penguin_github.png" alt="Click on the copy raw contents button" width="100%" />
<p class="caption">
Figure 3.2: Click on the copy raw contents button
</p>
</div>
<p>We then need to</p>
<ol style="list-style-type: decimal">
<li><p>Select the copy raw contents button</p></li>
<li><p>Open a blank notepad</p></li>
<li><p>Paste the contents</p></li>
<li><p>Save the file as ‘penguin_data.csv’</p></li>
<li><p>Open the newly saved file in Excel and take a look</p></li>
</ol>
<p>We can see a dataset with 345 rows (including the headers) and 17 variables</p>
<ul>
<li><p><strong>Study name</strong>: an identifier for the year in which sets of observations were made</p></li>
<li><p><strong>Region</strong>: the area in which the observation was recorded</p></li>
<li><p><strong>Island</strong>: the specific island where the observation was recorded</p></li>
<li><p><strong>Stage</strong>: Denotes reproductive stage of the penguin</p></li>
<li><p><strong>Individual</strong> ID: the unique ID of the individual</p></li>
<li><p><strong>Clutch completion</strong>: if the study nest observed with a full clutch e.g. 2 eggs</p></li>
<li><p><strong>Date egg</strong>: the date at which the study nest observed with 1 egg</p></li>
<li><p><strong>Culmen length</strong>: length of the dorsal ridge of the bird’s bill (mm)</p></li>
<li><p><strong>Culmen depth</strong>: depth of the dorsal ridge of the bird’s bill (mm)</p></li>
<li><p><strong>Flipper Length</strong>: length of bird’s flipper (mm)</p></li>
<li><p><strong>Body Mass</strong>: Bird’s mass in (g)</p></li>
<li><p><strong>Sex</strong>: Denotes the sex of the bird</p></li>
<li><p><strong>Delta 15N</strong> : the ratio of stable Nitrogen isotopes 15N:14N from blood sample</p></li>
<li><p><strong>Delta 13C</strong>: the ratio of stable Carbon isotopes 13C:12C from blood sample</p></li>
</ul>
</div>
</div>
<div id="prepare-the-rstudio-workspace" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Prepare the RStudio workspace</h2>
<p>Now we should have our question, we understand more about where the data came from, and we have our data in a CSV format.</p>
<p>The next step of our workflow is to have a well organised project space. RStudio Cloud does a lot of the hard work for you, each new data project can be set up with its own Project space.</p>
<p>We will define a project as a series of linked questions that uses one (or sometimes several) datasets. For example a coursework assignment for a particular module would be its own project, or eventually your final year research project.</p>
<p>A Project will contain several files, possibly organised into sub-folders containing data, R scripts and final outputs. You might want to keep any information (wider reading) you have gathered that is relevant to your project.</p>
<p>Open the Week Two - workflow project on RStudio Cloud.</p>
<p>Within this project you will notice there is already one file <em>.Rproj</em>. This is an R project file, this is a very useful feature, it interacts with R to tell it you are working in a very specific place on the computer (in this case the cloud server we have dialed into). It means R will automatically treat the location of your project file as the ‘working directory’ and makes importing and exporting easier<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>.</p>
<div id="organise" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Organise</h3>
<p>Now we are going to organise our workspace, first its always a good first step to go to Tools &gt; Project options and switch all of the options for saving and loading .Rdata to ‘No’</p>
<p>Then we create the following folders:</p>
<ul>
<li><p>data</p></li>
<li><p>scripts</p></li>
<li><p>figures</p></li>
</ul>
<div class="rmdwarning">
<p>
Make sure you type these <strong>exactly</strong> as printed here - remember that to R is case-sensitive so ‘data’ and ‘Data’ are two different things!
</p>
</div>
<p>Having these separate subfolders within our project helps keep things tidy, means it’s harder to lose things, and lets you easily tell R exactly where to go to retrieve data.</p>
<p>Now do you remember where you saved the ‘penguin_data.csv’ file? I hope so!!! Go to the upload button in the Files tab of RStudio Cloud and tell it where the file is located on your local computer and upload it to the ‘data’ folder you have made in your Project.</p>
<div class="figure"><span id="fig:unnamed-chunk-48"></span>
<img src="images/Project.png" alt="An example of a typical R project set-up" width="80%" />
<p class="caption">
Figure 3.3: An example of a typical R project set-up
</p>
</div>
</div>
<div id="create-a-new-r-script" class="section level3" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Create a new R script</h3>
<p>Let’s now create a new R script file in which we will write instructions and store comments for manipulating data, developing tables and figures. Use the File &gt; New Script menu item and select an R Script.</p>
<p>Add the following:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="workflow-part-one-week-two.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># An analysis of the bill dimensions of male and female Adelie, Gentoo and Chinstrap penguins. </span></span>
<span id="cb42-2"><a href="workflow-part-one-week-two.html#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="workflow-part-one-week-two.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Data first published in  Gorman, KB, TD Williams, and WR Fraser. 2014. “Ecological Sexual Dimorphism and Environmental Variability Within a Community of Antarctic Penguins (Genus Pygoscelis).” PLos One 9 (3): e90081. https://doi.org/10.1371/journal.pone.0090081.</span></span></code></pre></div>
<p>Then load the following add-on package to the R script, just underneath these comments. Tidyverse isn’t actually one package, but a bundle of many different packages that play well together - for example it <em>includes</em> <code>ggplot2</code> which we used in the last session, so we don’t have to call that separately</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="workflow-part-one-week-two.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># tidy data packages</span></span>
<span id="cb43-2"><a href="workflow-part-one-week-two.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># cleaning variable names</span></span>
<span id="cb43-3"><a href="workflow-part-one-week-two.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate) <span class="co"># make sure dates are processed properly</span></span></code></pre></div>
<p>Now save this file in the scripts folder and call it <em>penguin_measurements.R</em></p>
</div>
</div>
<div id="get-the-data-into-r" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Get the data into R</h2>
<p>Now we are <em>finally</em> ready to import the data into R.</p>
<p>Add the following code to your script, then starting at line 1 - ask your script to run in order, library function first as the <code>read_csv()</code> function is from an add-on package <code>readr</code></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="workflow-part-one-week-two.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the data from the data folder in my project</span></span>
<span id="cb44-2"><a href="workflow-part-one-week-two.html#cb44-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/penguins_data.csv&quot;</span>)</span></code></pre></div>
<pre><code>Error!
</code></pre>
<p>Houston we have a problem! We got an error!!! blah blah does not exist in current working directory</p>
<p>This usually happens if we told R to look in the wrong place, or didn’t give it the correct name of what to look for. Can you spot what the mistake was?</p>
<p>Edit your existing line of script to replace it with the proper file name and run the command again.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="workflow-part-one-week-two.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the data from the data folder in my project</span></span>
<span id="cb46-2"><a href="workflow-part-one-week-two.html#cb46-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/penguins_data.csv&quot;</span>)</span></code></pre></div>
<pre><code>Parsed with column specification:
cols(
  studyName = col_character(),
  `Sample Number` = col_double(),
  Species = col_character(),
  Region = col_character(),
  Island = col_character(),
  Stage = col_character(),
  `Individual ID` = col_character(),
  `Clutch Completion` = col_character(),
  `Date Egg` = col_character(),
  `Culmen Length (mm)` = col_double(),
  `Culmen Depth (mm)` = col_double(),
  `Flipper Length (mm)` = col_double(),
  `Body Mass (g)` = col_character(),
  Sex = col_character(),
  `Delta 15 N (o/oo)` = col_double(),
  `Delta 13 C (o/oo)` = col_double(),
  Comments = col_character()
)</code></pre>
<p>Great, no error this time, the <code>read_csv()</code> function has read the data and we &lt;- assigned this data to the object <code>penguins</code>. If you look in the environment pane you should see the object <code>penguins</code>.</p>
<p>The lines printed in the R console tell us the names of the columns that were identified in the file and the type of variable R thinks it is</p>
<ul>
<li><p><code>col_character()</code> means the column contains letters or words</p></li>
<li><p><code>col_double()</code> means the column contains numbers</p></li>
</ul>
<div class="rmdquestion">
<p>
Have a look - do all of these seem correct to you? If not we should fix these, and we will get onto that in a little bit.
</p>
</div>
<div id="view-and-refine" class="section level3" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> View and refine</h3>
<p>So we know our data is in R, and we know the columns and names have been imported. But we still don’t know whether all of our values imported, or whether it captured all the rows.</p>
<p>There are lots of different ways to view and check data. One useful method is <code>glimpse</code></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="workflow-part-one-week-two.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check the structure of the data</span></span>
<span id="cb48-2"><a href="workflow-part-one-week-two.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(penguins)</span></code></pre></div>
<p>When we run <code>glimpse()</code> we get several lines of output. The number of observations “rows,” the number of variables “columns.” Check this against the csv file you have - they should be the same. In the next lines we see variable names and the type of data.</p>
<p>We should be able to see by now, that all is not well!!! <code>Body Mass (g)</code> is being treated as character (string), as is <code>Date Egg</code>, meaning R thinks these contain letters and words instead of numbers and dates.</p>
<p>Other ways to view the data</p>
<ul>
<li><p>type <code>penguins</code> into the Console</p></li>
<li><p>type <code>view(penguins)</code> this will open a spreadsheet in a new tab</p></li>
<li><p>type <code>head(penguins)</code> will show the first 10 lines of the data, rather than the whole dataset</p></li>
</ul>
<blockquote>
<p>**Note - <code>view()</code> lets you do cool stuff like reorder rows and quickly scroll through the dataset without affecting the underlying data.</p>
</blockquote>
</div>
<div id="data-management" class="section level3" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Data management</h3>
<p>We’ve imported the data, checked it and found some inconsistencies.</p>
<p>This is where we start to use some of the core functions from <code>tidyverse</code>.</p>
<p>If R thinks <code>Body Mass (g)</code> is a character variable, then it probably contains some words as well as numbers. So let’s have a look at this and compare it to a variable which has been processed correctly</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="workflow-part-one-week-two.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the first 10 rows of the Flipper Length and Body Mass variables</span></span>
<span id="cb49-2"><a href="workflow-part-one-week-two.html#cb49-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="workflow-part-one-week-two.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>, </span>
<span id="cb49-4"><a href="workflow-part-one-week-two.html#cb49-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb49-5"><a href="workflow-part-one-week-two.html#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="co"># 10 rows</span></span></code></pre></div>
<p><img src="images/NA.png" width="80%" /></p>
<blockquote>
<p>**Note - What is the %&gt;% ??? It’s known as a pipe. It sends the results of one line of code to the next. So the data penguins is sent to the <code>select</code> function which picks only those variables we want. The result of this is then sent to the <code>head</code> function which with the argument for number of rows set to 10, prints the top 10 rows.</p>
</blockquote>
<blockquote>
<p>The other way to write this series of functions would be to use brackets and the rules of BODMAS:</p>
</blockquote>
<pre><code>head(select(penguins, `Flipper Length (mm)`, `Body Mass (g)`),10)</code></pre>
<blockquote>
<p>Hopefully you agree that the pipes make the code a lot more human-reader friendly. More on pipes later</p>
</blockquote>
<p>So what’s the problem with our data? in the Flipper length variable, missing observations have been correctly marked as <code>NA</code> signifying missing data. R can handle missing data just fine. However, in thew Body mass variable, it looks as though someone has actually typed “na” in observations where the data is missing. Here R has failed to recognise an <code>NA</code> and has read it as a word instead. This is because <code>read_csv()</code> looks for gaps or <code>NA</code> but not “na.”</p>
<p>No problem this is an easy fix. Head back to your script and make the following edit the line for data importing</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="workflow-part-one-week-two.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the penguins data, specify that NA strings can be &quot;na&quot; or &quot;NA&quot;</span></span>
<span id="cb51-2"><a href="workflow-part-one-week-two.html#cb51-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/penguin_data.csv&quot;</span>, <span class="at">na=</span><span class="fu">c</span>(<span class="st">&quot;na&quot;</span>,<span class="st">&quot;NA&quot;</span>))</span></code></pre></div>
<p>Now re-check your data using the same lines of code from before.
All ok now?</p>
</div>
</div>
<div id="dataframes-and-tibbles" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Dataframes and tibbles</h2>
<p>A quick sidebar on how R stores data. When we imported the data into R it ws put into an object called a <strong>tibble</strong> which is a type of <strong>dataframe</strong>.</p>
<p>Let’s have a quick go at making our own <strong>tibble</strong> from scratch.</p>
<p>Make a new script called ‘TibbleTrouble.R’ in the scripts folder as before.</p>
<p>At the top of this new script put</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="workflow-part-one-week-two.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># just me messing about making tibbles</span></span>
<span id="cb52-2"><a href="workflow-part-one-week-two.html#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="workflow-part-one-week-two.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co"># libraries</span></span>
<span id="cb52-4"><a href="workflow-part-one-week-two.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb52-5"><a href="workflow-part-one-week-two.html#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="workflow-part-one-week-two.html#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="co"># make some variables, when we have a one dimensional object like this it is known as an atomic vector!</span></span>
<span id="cb52-7"><a href="workflow-part-one-week-two.html#cb52-7" aria-hidden="true" tabindex="-1"></a>person <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Mark&quot;</span>, <span class="st">&quot;Phil&quot;</span>, <span class="st">&quot;Becky&quot;</span>, <span class="st">&quot;Tony&quot;</span>)</span>
<span id="cb52-8"><a href="workflow-part-one-week-two.html#cb52-8" aria-hidden="true" tabindex="-1"></a>hobby <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;kickboxing&quot;</span>, <span class="st">&quot;coding&quot;</span>, <span class="st">&quot;dog walking&quot;</span>, <span class="st">&quot;car boot sales&quot;</span>)</span>
<span id="cb52-9"><a href="workflow-part-one-week-two.html#cb52-9" aria-hidden="true" tabindex="-1"></a>awesomeness <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">100</span>,<span class="dv">1</span>,<span class="dv">1</span>)</span></code></pre></div>
<p>The function <code>c</code> lets you ‘concatenate’ or link each of these arguments together into a single vector.</p>
<p>Now we put these vectors together, where they become the variables in a new tibble</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="workflow-part-one-week-two.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make a tibble</span></span>
<span id="cb53-2"><a href="workflow-part-one-week-two.html#cb53-2" aria-hidden="true" tabindex="-1"></a>my_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(person, hobby, awesomeness)</span>
<span id="cb53-3"><a href="workflow-part-one-week-two.html#cb53-3" aria-hidden="true" tabindex="-1"></a>my_data</span></code></pre></div>
<pre><code># A tibble: 4 x 3
  person hobby          awesomeness
  &lt;chr&gt;  &lt;chr&gt;                &lt;dbl&gt;
1 Mark   kickboxing               1
2 Phil   coding                 100
3 Becky  dog walking              1
4 Tony   car boot sales           1</code></pre>
<p>Have a go at messing about with your script and figure out what each of these does, add comments and save your script.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="workflow-part-one-week-two.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Some R functions for looking at tibbles and dataframes I will comment next to each one with what it does</span></span>
<span id="cb55-2"><a href="workflow-part-one-week-two.html#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="workflow-part-one-week-two.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(my_data, <span class="at">n=</span><span class="dv">2</span>)</span>
<span id="cb55-4"><a href="workflow-part-one-week-two.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(my_data, <span class="at">n=</span><span class="dv">1</span>)</span>
<span id="cb55-5"><a href="workflow-part-one-week-two.html#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(my_data)</span>
<span id="cb55-6"><a href="workflow-part-one-week-two.html#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(my_data)</span>
<span id="cb55-7"><a href="workflow-part-one-week-two.html#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(my_data)</span>
<span id="cb55-8"><a href="workflow-part-one-week-two.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(my_data)</span>
<span id="cb55-9"><a href="workflow-part-one-week-two.html#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(my_data)</span>
<span id="cb55-10"><a href="workflow-part-one-week-two.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(my_data)</span></code></pre></div>
</div>
<div id="clean-and-tidy" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Clean and tidy</h2>
<p>Back to your penguins script.</p>
<p>We have checked the data imported correctly, now its time to <em>clean and tidy</em> the data.</p>
<div id="tidy" class="section level3" number="3.7.1">
<h3><span class="header-section-number">3.7.1</span> Tidy</h3>
<p>In this example our data is already in <code>tidy</code> format i.e. one observation per row. We will cover what to do if data isn’t tidy later.</p>
</div>
<div id="clean" class="section level3" number="3.7.2">
<h3><span class="header-section-number">3.7.2</span> Clean</h3>
<p>Here are a few things we might want to do to our data to make it ‘clean.’</p>
<ul>
<li><p>Refine variable names</p></li>
<li><p>Format dates and times</p></li>
<li><p>Rename some values</p></li>
<li><p>Check for any duplicate records</p></li>
<li><p>Check for any implausible data or typos</p></li>
<li><p>Check and deal with missing values</p></li>
</ul>
<blockquote>
<p>**Note - Remember because we are doing everything in a script, the original data remains unchanged. This means we have data integrity, and a clear record of what we did to tidy and clean a dataset in order to produce summaries and data visuals</p>
</blockquote>
</div>
<div id="refine-variable-names" class="section level3" number="3.7.3">
<h3><span class="header-section-number">3.7.3</span> Refine variable names</h3>
<p>Often we might want to change the names of our variables. They might be non-intuitive, or too long. Our data has a couple of issues:</p>
<ul>
<li><p>Some of the names contain spaces</p></li>
<li><p>Some of the names contain brackets</p></li>
</ul>
<p>Let’s correct these quickly</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="workflow-part-one-week-two.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#clean all variable names to snake_case using the clean_names function from the janitor package</span></span>
<span id="cb56-2"><a href="workflow-part-one-week-two.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># note we are using assign &lt;- to overwrite the old version of penguins with a version that has updated names</span></span>
<span id="cb56-3"><a href="workflow-part-one-week-two.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># this changes the data in our R workspace but not the original csv file</span></span>
<span id="cb56-4"><a href="workflow-part-one-week-two.html#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="workflow-part-one-week-two.html#cb56-5" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> <span class="co">#</span></span>
<span id="cb56-6"><a href="workflow-part-one-week-two.html#cb56-6" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb56-7"><a href="workflow-part-one-week-two.html#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="workflow-part-one-week-two.html#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(penguins) <span class="co"># quickly check the new variable names</span></span></code></pre></div>
<blockquote>
<p>**Note - in this example you can see that I put the name of the package janitor, in front of the function <code>clean_names</code>. But if I have already loaded the package with library(janitor) then this isn’t strictly necessary and penguins %&gt;% clean_names() would also have worked just fine. So why do this? Remember when we loaded the tidyverse package - we got a warning about conflicts - this was because two of our packages <code>dplyr</code> and <code>stats</code> have functions that are different, but share the same name. But we can make sure we call the one we want by specifying which package we are calling a function from. We don’t need to do this very often, but it’s good to know.</p>
</blockquote>
<pre><code>&gt; library(tidyverse)
-- Attaching packages --------------------------------------- tidyverse 1.3.0 --
v ggplot2 3.3.2     v purrr   0.3.4
v tibble  3.0.4     v dplyr   1.0.2
v tidyr   1.1.2     v stringr 1.4.0
v readr   1.3.1     v forcats 0.5.0
-- Conflicts ------------------------------------------ tidyverse_conflicts() --
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()</code></pre>
<p>The <code>clean_names</code> function quickly converts all variable names into snake case. The N and C blood isotope ratio names are still quite long though, so let’s clean those with <code>dplyr::rename()</code> where “new_name” = “old_name.”</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="workflow-part-one-week-two.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># shorten the variable names for N and C isotope blood samples</span></span>
<span id="cb58-2"><a href="workflow-part-one-week-two.html#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="workflow-part-one-week-two.html#cb58-3" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb58-4"><a href="workflow-part-one-week-two.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;delta_15n&quot;</span><span class="ot">=</span><span class="st">&quot;delta_15_n_o_oo&quot;</span>,  <span class="co"># use rename from the dplyr package</span></span>
<span id="cb58-5"><a href="workflow-part-one-week-two.html#cb58-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;delta_13c&quot;</span><span class="ot">=</span><span class="st">&quot;delat_13_c_o_oo&quot;</span>)</span></code></pre></div>
</div>
<div id="dates" class="section level3" number="3.7.4">
<h3><span class="header-section-number">3.7.4</span> Dates</h3>
<p>We can also see there is a <code>date_egg</code> variable. If you check it (using any of the new functions you have learned), you should see that it all looks like its been inputted correctly, but R is treating it as words, rather than assigning it a date value. We can fix that with the <code>lubridate</code> package. If we use the function <code>dmy</code> then we tell R this is date data in date/month/year format.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="workflow-part-one-week-two.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use dmy from stringr package to encode date properly</span></span>
<span id="cb59-2"><a href="workflow-part-one-week-two.html#cb59-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb59-3"><a href="workflow-part-one-week-two.html#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date_egg_proper=</span><span class="fu">dmy</span>(date_egg))</span></code></pre></div>
<div class="rmdquestion">
<p>
What is the deliberate mistake in my code comment above? By now you may have picked up there are the odd mistakes (possibly some non-deliberate ones) - to make sure you aren’t just copy-pasting on autpilot.
</p>
</div>
<p>Here we use the <code>mutate</code> function from <code>dplyr</code> to create a new variable called <code>date_egg_proper</code> based on the output of converting the characters in <code>date_egg</code> to date format. The original variable is left intact, if we had specified the “new” variable was also called <code>date_egg</code> then it would have overwritten the original variable.</p>
</div>
<div id="rename-some-values" class="section level3" number="3.7.5">
<h3><span class="header-section-number">3.7.5</span> Rename some values</h3>
<p>Sometimes we may want to rename the values in our variables in order to make a shorthand that is easier to follow.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="workflow-part-one-week-two.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use mutate and case_when for an if-else statement that changes the names of the values in a variable</span></span>
<span id="cb60-2"><a href="workflow-part-one-week-two.html#cb60-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="workflow-part-one-week-two.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">case_when</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie Penguin (Pygoscelis adeliae)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Adelie&quot;</span>,</span>
<span id="cb60-4"><a href="workflow-part-one-week-two.html#cb60-4" aria-hidden="true" tabindex="-1"></a>                             species <span class="sc">==</span> <span class="st">&quot;Gentoo penguin (Pygoscelis papua)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Gentoo&quot;</span>,</span>
<span id="cb60-5"><a href="workflow-part-one-week-two.html#cb60-5" aria-hidden="true" tabindex="-1"></a>                             species <span class="sc">==</span> <span class="st">&quot;Chinstrap penguin (Pygoscelis antarctica)&quot;</span> <span class="sc">~</span> <span class="st">&quot;Chinstrap&quot;</span>))</span></code></pre></div>
</div>
<div id="check-for-duplication" class="section level3" number="3.7.6">
<h3><span class="header-section-number">3.7.6</span> Check for duplication</h3>
<p>It is very easy when inputting data to make mistakes, copy something in twice for example, or if someone did a lot of copy-pasting to assemble a spreadsheet (yikes!). We can check this pretty quickly</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="workflow-part-one-week-two.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check for duplicate rows in the data</span></span>
<span id="cb61-2"><a href="workflow-part-one-week-two.html#cb61-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="workflow-part-one-week-two.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">duplicated</span>() <span class="sc">%&gt;%</span> <span class="co"># produces a list of TRUE/FALSE statements for duplicated or not</span></span>
<span id="cb61-4"><a href="workflow-part-one-week-two.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="co"># sums all the TRUE statements</span></span></code></pre></div>
<pre><code>[1] 0</code></pre>
<p>Great!</p>
</div>
<div id="check-for-typos-or-implausible-values" class="section level3" number="3.7.7">
<h3><span class="header-section-number">3.7.7</span> Check for typos or implausible values</h3>
<p>We can also explore our data for very obvious typos by checking for implausibly small or large values</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="workflow-part-one-week-two.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use summarise to make calculations</span></span>
<span id="cb63-2"><a href="workflow-part-one-week-two.html#cb63-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="workflow-part-one-week-two.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min=</span><span class="fu">min</span>(body_mass_g, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb63-4"><a href="workflow-part-one-week-two.html#cb63-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">max=</span><span class="fu">max</span>(body_mass_g, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<p>The minimum weight for our penguins is 2.7kg, and the max is 6.3kg - not outrageous. If the min had come out at 27g we might have been suspicious. We will use <code>summarise</code> again to calculate other metrics in the future.</p>
<blockquote>
<p>**Note - our first data insight, the difference the smallest adult penguin in our dataset is nearly half the size of the largest penguin.</p>
</blockquote>
<p>We can also look for typos by asking R to produce all of the distinct values in a variable. This is more useful for categorical data, where we expect there to be only a few distinct categories</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="workflow-part-one-week-two.html#cb64-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="workflow-part-one-week-two.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(sex)</span></code></pre></div>
<p>Here if someone had mistyped e.g. ‘FMALE’ it would be obvious. We could do the same thing (and probably should have before we changed the names) for species.</p>
</div>
<div id="missing-values---na" class="section level3" number="3.7.8">
<h3><span class="header-section-number">3.7.8</span> Missing values - NA</h3>
<p>There are multiple ways to check for missing values in our data</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="workflow-part-one-week-two.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get a sum of how many observations are missing in our dataframe</span></span>
<span id="cb65-2"><a href="workflow-part-one-week-two.html#cb65-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb65-3"><a href="workflow-part-one-week-two.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">is.na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb65-4"><a href="workflow-part-one-week-two.html#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>()</span></code></pre></div>
<p>But this doesn’t tell us where these are, fortunately the function <code>summary</code> does this easily</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="workflow-part-one-week-two.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># produce a summary of our data</span></span>
<span id="cb66-2"><a href="workflow-part-one-week-two.html#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(penguins)</span></code></pre></div>
<p>This provides a quick breakdown of the max and min for all numeric variables, as well as a list of how many missing observations there are for each one. As we can see there appear to be two missing observations for measurements in body mass, bill lengths, flipper lengths and several more for blood measures. We don’t know for sure without inspecting our data further, <em>but</em> it is likely that the two birds are missing multiple measurements, and that several more were measured but didn’t have their blood drawn.</p>
<p>We will leave the NA’s alone for now, but it’s useful to know how many we have.</p>
<p>We’ve now got a clean &amp; tidy dataset!!</p>
</div>
</div>
<div id="summing-up" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Summing up</h2>
<div id="what-we-learned" class="section level3" number="3.8.1">
<h3><span class="header-section-number">3.8.1</span> What we learned</h3>
<p>There was a lot of preparation here, and we haven’t really got close to make any major insights. But you have:</p>
<ul>
<li><p>Organised your project space</p></li>
<li><p>Dealt with file formats</p></li>
<li><p>Put data into a specific location and imported into R</p></li>
<li><p>Checked the data import</p></li>
<li><p>Cleaned and tidied the data</p></li>
</ul>
<p>You have also been introduced to the <code>tidyverse</code> and two of its packages</p>
<ul>
<li><p><code>readr</code> <span class="citation"><a href="references.html#ref-R-readr" role="doc-biblioref">Wickham, Hester, and Francois</a> (<a href="references.html#ref-R-readr" role="doc-biblioref">2018</a>)</span></p></li>
<li><p><code>dplyr</code> <span class="citation"><a href="references.html#ref-R-dplyr" role="doc-biblioref">Wickham, François, et al.</a> (<a href="references.html#ref-R-dplyr" role="doc-biblioref">2020</a>)</span></p></li>
</ul>
<p>As well as:</p>
<ul>
<li><p><code>janitor</code> <span class="citation"><a href="references.html#ref-R-janitor" role="doc-biblioref">Firke</a> (<a href="references.html#ref-R-janitor" role="doc-biblioref">2021</a>)</span></p></li>
<li><p><code>lubridate</code> <span class="citation"><a href="references.html#ref-R-lubridate" role="doc-biblioref">Spinu, Grolemund, and Wickham</a> (<a href="references.html#ref-R-lubridate" role="doc-biblioref">2020</a>)</span></p></li>
</ul>
</div>
<div id="quitting-1" class="section level3" number="3.8.2">
<h3><span class="header-section-number">3.8.2</span> Quitting</h3>
<div class="rmdwarning">
<p>
Remember to <strong>save</strong> your RScript before you leave. And ideally don’t save your .Rdata!
</p>
</div>
<ul>
<li><p>Close your RStudio Cloud Browser</p></li>
<li><p>Go to Blackboard to complete this week’s quiz!</p></li>
</ul>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>(<a href="http://vita.had.co.nz/papers/tidy-data.pdf" class="uri">http://vita.had.co.nz/papers/tidy-data.pdf</a>)<a href="workflow-part-one-week-two.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><a href="https://www.theguardian.com/politics/2020/oct/05/how-excel-may-have-caused-loss-of-16000-covid-tests-in-england" class="uri">https://www.theguardian.com/politics/2020/oct/05/how-excel-may-have-caused-loss-of-16000-covid-tests-in-england</a><a href="workflow-part-one-week-two.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>More on projects can be found in the R4DS book (<a href="https://r4ds.had.co.nz/workflow-projects.html" class="uri">https://r4ds.had.co.nz/workflow-projects.html</a>)<a href="workflow-part-one-week-two.html#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-to-know-r-week-one.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="workflow-part-two-week-three.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-workflow-1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
